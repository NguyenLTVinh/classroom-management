doctype html
html
    head
        title Add Grades
        script(src="https://code.jquery.com/jquery-3.6.0.min.js")
    body
        form(action="/add-grades" method="POST")
            .row
                select#class(name="className" required)
                    option(value="") Select Class
                    each className in classes
                        option(value=className) #{className}
                select#student(name="info[email1]" required)
                    option(value="") Select Student
                select(name="info[term]" required)
                    option(value="HK1") HK1
                    option(value="HK2") HK2
            .row
                label(for="toan") Toán
                input#toan(type="number" step="0.1" name="subjectGrades[Toán]")
                label(for="tienganh") Tiếng Anh
                input#tienganh(type="number" step="0.1" name="subjectGrades[Tiếng Anh]")
                label(for="nguvan") Ngữ Văn
                input#nguvan(type="number" step="0.1" name="subjectGrades[Ngữ Văn]")
                label(for="gdcd") GDCD
                input#gdcd(type="number" step="0.1" name="subjectGrades[GDCD]")
                label(for="tinhoc") Tin học
                input#tinhoc(type="number" step="0.1" name="subjectGrades[Tin học]")
                label(for="congnghe") Công nghệ
                input#congnghe(type="number" step="0.1" name="subjectGrades[Công nghệ]")
                label(for="lsdl") LS & ĐL
                input#lsdl(type="number" step="0.1" name="subjectGrades[LS & ĐL]")
                label(for="khtn") Khoa học tự nhiên
                input#khtn(type="number" step="0.1" name="subjectGrades[Khoa học tự nhiên]")
            .row
                label(for="gdct") GDTC
                input(type="checkbox" id="gdct" name="subjectGrades[GDTC]")
                label(for="hdtt") HĐTT/TN/HN
                input(type="checkbox" id="hdtt" name="subjectGrades[HĐTT/TN/HN]")
                label(for="nghethuat") Nghệ thuật
                input(type="checkbox" id="nghethuat" name="subjectGrades[Nghệ thuật]")
                label(for="ndgddp") Nội dung giáo dục của địa phương
                input(type="checkbox" id="ndgddp" name="subjectGrades[Nội dung giáo dục của địa phương]")

            button(type="submit") Submit

        script.
            $(document).ready(function() {
                $('#class').change(function() {
                    const className = $(this).val();
                    $.ajax({
                        url: `/students?class=${className}`,
                        method: 'GET',
                        success: function(data) {
                            const studentSelect = $('#student');
                            studentSelect.empty();
                            data.forEach(student => {
                                studentSelect.append(new Option(student.name, student.email1));
                            });
                        },
                        error: function() {
                            alert('Error fetching students');
                        }
                    });
                });
            });
